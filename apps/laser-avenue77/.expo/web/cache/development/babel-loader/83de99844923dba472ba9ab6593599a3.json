{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from \"react\";\nimport { Box, Text, Heading, VStack, FormControl, Input, Link, Button, HStack, Center, NativeBaseProvider, Spinner } from \"native-base\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { loginFlagHandler, closeloginFlagHandler } from \"../../FinalLayout/store-finalLayout\";\nimport { saveToken } from \"../../Dashboard/store-dashboard\";\nimport axios from 'axios';\nimport requestBuilder from \"../../requestRebuilder  \";\nimport { useFocusEffect } from '@react-navigation/native';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Example = function Example(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loader = _useState2[0],\n      setLoader = _useState2[1];\n\n  var _useState3 = useState({\n    username: \"\",\n    password: \"\"\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userObj = _useState4[0],\n      setUserObj = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isAuthenticated = _useState6[0],\n      setIsAuthenticated = _useState6[1];\n\n  var finalLayoutStore = useSelector(function (state) {\n    return state.finalLayoutStore;\n  });\n  var dispatch = useDispatch();\n  useFocusEffect(React.useCallback(function () {\n    dispatch(closeloginFlagHandler());\n    setIsAuthenticated(false);\n  }, []));\n\n  var signInAuthentication = function signInAuthentication(results) {\n    if (results.data.message == \"User Not Found!\" || results.data.message == \"Username or Password is Incorrect\") {\n      dispatch(closeloginFlagHandler());\n      setLoader(false);\n      setIsAuthenticated(true);\n    } else {\n      dispatch(saveToken(results.data.accessToken));\n      dispatch(loginFlagHandler());\n      navigation.navigate('Dashboard');\n      setLoader(false);\n    }\n  };\n\n  var signInHandler = function _callee() {\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLoader(true);\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(axios(requestBuilder('ciam', '/v1/signin', 'post', userObj)).then(function (results) {\n              return signInAuthentication(results);\n            }));\n\n          case 4:\n            _context.next = 11;\n            break;\n\n          case 6:\n            _context.prev = 6;\n            _context.t0 = _context[\"catch\"](1);\n            dispatch(closeloginFlagHandler());\n            setLoader(false);\n            setIsAuthenticated(true);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[1, 6]], Promise);\n  };\n\n  return _jsx(NativeBaseProvider, {\n    children: _jsxs(View, {\n      style: {\n        width: '100vw'\n      },\n      children: [loader && _jsx(Spinner, {\n        mt: \"250\",\n        color: \"emerald.500\",\n        size: \"lg\",\n        accessibilityLabel: \"Loading posts\"\n      }), loader == false && _jsx(Center, {\n        flex: 1,\n        px: \"3\",\n        w: \"100%\",\n        children: _jsxs(Box, {\n          safeArea: true,\n          p: \"2\",\n          py: \"8\",\n          w: \"90%\",\n          maxW: \"290\",\n          children: [_jsx(Heading, {\n            size: \"lg\",\n            fontWeight: \"600\",\n            color: \"coolGray.800\",\n            _dark: {\n              color: \"warmGray.50\"\n            },\n            children: \"Laser Avenue\"\n          }), _jsx(Heading, {\n            mt: \"1\",\n            _dark: {\n              color: \"warmGray.200\"\n            },\n            color: \"coolGray.600\",\n            fontWeight: \"medium\",\n            size: \"xs\",\n            children: \"Sign in to continue!\"\n          }), _jsxs(VStack, {\n            space: 3,\n            mt: \"5\",\n            children: [_jsxs(FormControl, {\n              children: [_jsx(FormControl.Label, {\n                children: \"Email ID\"\n              }), _jsx(Input, {\n                onChangeText: function onChangeText(value) {\n                  return setUserObj(_objectSpread(_objectSpread({}, userObj), {}, {\n                    username: value\n                  }));\n                }\n              })]\n            }), _jsxs(FormControl, {\n              children: [_jsx(FormControl.Label, {\n                children: \"Password\"\n              }), _jsx(Input, {\n                onChangeText: function onChangeText(value) {\n                  return setUserObj(_objectSpread(_objectSpread({}, userObj), {}, {\n                    password: value\n                  }));\n                },\n                type: \"password\"\n              }), _jsx(Link, {\n                _text: {\n                  fontSize: \"xs\",\n                  fontWeight: \"500\",\n                  color: \"#05595B\"\n                },\n                onPress: function onPress() {\n                  return navigation.navigate('forgetPassword');\n                },\n                alignSelf: \"flex-end\",\n                mt: \"1\",\n                children: \"Forget Password?\"\n              })]\n            }), isAuthenticated && _jsx(FormControl.Label, {\n              children: _jsx(Text, {\n                style: {\n                  textAlign: \"center\",\n                  color: 'red'\n                },\n                children: \" The Email address or Password you entered is invalid \"\n              })\n            }), _jsx(Button, {\n              mt: \"2\",\n              style: {\n                backgroundColor: 'teal'\n              },\n              onPress: function onPress() {\n                return signInHandler();\n              },\n              children: \"Sign in\"\n            }), _jsxs(HStack, {\n              mt: \"6\",\n              justifyContent: \"center\",\n              children: [_jsxs(Text, {\n                fontSize: \"sm\",\n                color: \"coolGray.600\",\n                _dark: {\n                  color: \"warmGray.200\"\n                },\n                children: [\"I'm a new user.\", \" \"]\n              }), _jsx(Link, {\n                _text: {\n                  color: \"#05595B\",\n                  fontWeight: \"medium\",\n                  fontSize: \"sm\"\n                },\n                onPress: function onPress() {\n                  return navigation.navigate('SignUp');\n                },\n                children: \"Sign Up\"\n              })]\n            })]\n          })]\n        })\n      })]\n    })\n  });\n};\n\nexport default Example;","map":{"version":3,"names":["React","useEffect","useState","Box","Text","Heading","VStack","FormControl","Input","Link","Button","HStack","Center","NativeBaseProvider","Spinner","useDispatch","useSelector","loginFlagHandler","closeloginFlagHandler","saveToken","axios","requestBuilder","useFocusEffect","Example","navigation","loader","setLoader","username","password","userObj","setUserObj","isAuthenticated","setIsAuthenticated","finalLayoutStore","state","dispatch","useCallback","signInAuthentication","results","data","message","accessToken","navigate","signInHandler","then","width","color","value","fontSize","fontWeight","textAlign","backgroundColor"],"sources":["C:/Users/User/AgentsNx/Mobile-Expo/agents/apps/laser-avenue77/src/CIAM/screens/Signin.js"],"sourcesContent":["import  React,{useEffect,useState} from \"react\";\r\nimport { Box, Text, Heading, VStack, FormControl, Input, Link, Button, HStack, Center, NativeBaseProvider,Spinner } from \"native-base\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {loginFlagHandler,closeloginFlagHandler} from '../../FinalLayout/store-finalLayout'\r\nimport {saveToken} from '../../Dashboard/store-dashboard'\r\nimport axios from 'axios'\r\nimport requestBuilder from '../../requestRebuilder  '\r\nimport { useFocusEffect } from '@react-navigation/native';\r\n// import {closeloginFlagHandler} from '../../FinalLayout/store-finalLayout'\r\n\r\n\r\nconst Example = ({navigation}) => {\r\nconst [loader,setLoader]=useState(false)\r\nconst [userObj,setUserObj]=useState({\r\n    username: \"\",\r\n    password: \"\" })\r\n    const [isAuthenticated,setIsAuthenticated]=useState(false)\r\n    const finalLayoutStore = useSelector(state => state.finalLayoutStore);\r\n    const dispatch = useDispatch();\r\n    useFocusEffect(\r\n      React.useCallback(() => {\r\n        dispatch(closeloginFlagHandler())\r\n        setIsAuthenticated(false)\r\n      }, []));\r\nconst signInAuthentication = (results)=> {\r\n    if ( results.data.message==\"User Not Found!\" ||results.data.message==\"Username or Password is Incorrect\" ) {\r\n      dispatch(closeloginFlagHandler())\r\n      setLoader(false)\r\n      setIsAuthenticated(true)\r\n    }\r\n    else{\r\n      dispatch(saveToken(results.data.accessToken))\r\n      dispatch(loginFlagHandler())\r\n      navigation.navigate('Dashboard')\r\n      setLoader(false)\r\n    }}\r\n\r\n  const signInHandler = async () => {\r\n    setLoader(true)\r\n      try {\r\n      await axios(requestBuilder('ciam','/v1/signin','post',userObj)).then((results=>signInAuthentication(results)))} \r\n      catch(error){\r\n        dispatch(closeloginFlagHandler())\r\n        setLoader(false)\r\n        setIsAuthenticated(true)\r\n      }}\r\n    return (\r\n      <NativeBaseProvider>\r\n        <View style={{width:'100vw'}}>\r\n        {/* <Text>Helloooooooooooooooooooooo</Text> */}\r\n       \r\n    {loader && <Spinner mt=\"250\" color=\"emerald.500\" size=\"lg\" accessibilityLabel=\"Loading posts\" />}\r\n    {loader==false &&  <Center  flex={1} px=\"3\" w=\"100%\">\r\n          <Box safeArea p=\"2\" py=\"8\" w=\"90%\" maxW=\"290\">\r\n          <Heading size=\"lg\" fontWeight=\"600\" color=\"coolGray.800\" _dark={{color: \"warmGray.50\"}}>\r\n            Laser Avenue \r\n          </Heading>\r\n          <Heading mt=\"1\" _dark={{ color: \"warmGray.200\" }} color=\"coolGray.600\" fontWeight=\"medium\" size=\"xs\">\r\n            Sign in to continue!\r\n          </Heading>\r\n          <VStack space={3} mt=\"5\">\r\n          <FormControl>\r\n          <FormControl.Label>Email ID</FormControl.Label>\r\n          <Input onChangeText={value => setUserObj({ ...userObj, username: value  })}  />\r\n          </FormControl>\r\n          <FormControl>\r\n          <FormControl.Label>Password</FormControl.Label>\r\n          <Input   onChangeText={value => setUserObj({ ...userObj, password: value})}   type=\"password\" />\r\n          <Link _text={{\r\n              fontSize: \"xs\",\r\n              fontWeight: \"500\",\r\n              color: \"#05595B\" }} onPress={()=>navigation.navigate('forgetPassword')} alignSelf=\"flex-end\" mt=\"1\">\r\n                Forget Password?\r\n          </Link>\r\n          </FormControl>\r\n            {isAuthenticated && <FormControl.Label ><Text style={{textAlign:\"center\",color:'red'}}> The Email address or Password you entered is invalid </Text></FormControl.Label>}\r\n         <Button mt=\"2\" style={{backgroundColor:'teal'}} onPress={ ()=> signInHandler() } >\r\n              Sign in\r\n         </Button>\r\n         <HStack mt=\"6\" justifyContent=\"center\">\r\n         <Text fontSize=\"sm\" color=\"coolGray.600\" _dark={{color: \"warmGray.200\" }}>\r\n                I'm a new user.{\" \"}\r\n         </Text>\r\n         <Link _text={{\r\n              color: \"#05595B\",\r\n              fontWeight: \"medium\",\r\n              fontSize: \"sm\"\r\n            }} onPress={()=>navigation.navigate('SignUp')}>\r\n                Sign Up\r\n         </Link>\r\n         </HStack>\r\n         </VStack>\r\n        </Box>\r\n      </Center>}\r\n      </View>\r\n      </NativeBaseProvider>\r\n      )\r\n  };\r\n\r\n      export default Example"],"mappings":"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"},"metadata":{},"sourceType":"module"}